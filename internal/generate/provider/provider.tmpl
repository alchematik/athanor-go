// Code generated by athanor-go.
// DO NOT EDIT.

package {{ .PackageName }}

import (
  "fmt"

	sdk "github.com/alchematik/athanor-go/sdk/provider/value"
)

func ParseIdentifier(v any) (sdk.ResourceIdentifier, error) {
  id, ok := v.(sdk.Identifier)
  if !ok {
    return nil, fmt.Errorf("expected Identifier type, got %T", v)
  }

  switch id.ResourceType {
{{ range .Types -}}
  case "{{ . }}":
    return Parse{{ toPascalCase . }}Identifier(id)
{{ end }}
  default:
    return nil, fmt.Errorf("invalid resource type: %s", id.ResourceType)
  }
}

func ParseIdentifierList(v any) ([]sdk.ResourceIdentifier, error) {
	list, ok := v.([]any)
	if !ok {
		return nil, fmt.Errorf("invalid type for list: %T", v)
	}

	var ids []sdk.ResourceIdentifier
	for _, v := range list {
		id, err := ParseIdentifier(v)
		if err != nil {
			return nil, err
		}

		ids = append(ids, id)
	}

	return ids, nil
}
